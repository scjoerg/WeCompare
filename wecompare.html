 <!DOCTYPE html>

 <html lang="en">
 <head>
   <meta charset="utf-8">
   <title>weCompare</title>
	<LINK href="wecomparestyle.css" rel="stylesheet" type="text/css">
 </head>
 <body>
    <!-- Script stuff -->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
    <script src="http://rdfquery.googlecode.com/files/jquery.rdfquery.core.min-1.0.js"></script>

    <script>
    var counter = 1;
    var limit = 10;
    var maxTitleLength = 30;

	function loadnewsite() {
			var url=document.getElementById('urlinput').value;
				if (url.substring(0,7) != 'http://'){
					if(url.substring(0,4) != 'www.') {
						url='www.'.concat(url);         		
					}
					url='http://'.concat(url);
				}
				document.getElementById('oFrame').src = url;

	}

	function AddTitleToSelectList(number) {
		if(document.getElementById("newTitleTextArea"+number) != null) document.getElementById("newTitleTextArea"+number).remove();
		
		var newTitleTextArea = document.createElement('textarea');
		newTitleTextArea.className='newTitleTextArea';
		newTitleTextArea.setAttribute("name",'newTitleTextArea'+number);
		newTitleTextArea.setAttribute("id",'newTitleTextArea'+number);
		
		var button = document.getElementById("titleButton"+number);
		//newTitleTextArea.style.left = button.offsetLeft+"px";
		newTitleTextArea.style.top = button.offsetTop+"px";
		document.getElementById("tagslist").appendChild(newTitleTextArea);
		
		newTitleTextArea.focus();

		newTitleTextArea.onkeypress=function(e){
			if(e.keyCode==13) {
				e.preventDefault();
				if(this.value.length > maxTitleLength) {
					alert("The new title is too long! Do not exceed " + maxTitleLength + " characters please!");
				}
				else {
					if(this.value.length > 0) {
						var theSelectList = document.getElementById("selectList"+number);
						var myNewOption = new Option(this.value, this.value);
						var optsLen = theSelectList.options.length;
    						theSelectList.options[optsLen] = myNewOption;
						theSelectList.selectedIndex = optsLen;
					}
					$(this).remove();
				}
			}
		};
	}

	$(document).ready(function(){

		var books = $.rdf.databank()
		.prefix('foaf', 'http://xmlns.com/foaf/0.1/')
		.prefix('dc', 'http://purl.org/dc/elements/1.1/')
		.prefix('dct', 'http://purl.org/dc/terms/')
		.prefix('xsd', 'http://www.w3.org/2001/XMLSchema#')
		.add('<http://example.com/aReallybad> dc:title "A Really bad Book" .')
		.add('<http://example.com/aReallybad> dc:creator _:creator .')
		.add('_:creator a foaf:Person .')
		.add('_:creator foaf:name "John Muster" .')
		.add('<http://example.com/aReallybad> dct:issued "2012-01-12"^^xsd:date .');


		$.ajax({
			  type: 'POST',
			  url: 'http://arkania.dyndns.org:9898/data/test.rdf',
			  processData: false,
			  contentType: 'application/rdf+xml',
			  success: function(){ },
			  data: books.dump({format:'application/rdf+xml', serialize: true}),
		});	


		var newurl = document.location.search.substring(3);
		if (newurl) {	
			document.getElementById('urlinput').value = newurl;		
			loadnewsite();
		}

		$("#urlinput").keypress(function(event) {
			if ( event.which == 13 ) {
				event.preventDefault();
				loadnewsite();
				}
		});

		$("#addtagbutton").click(function() {
			if (counter > limit)  {
				alert("You have reached the limit of adding " + counter + " tags");
			}
			else {
				var newdiv = document.createElement('div');
				newdiv.className="row";
				
				var newspan = document.createElement('span');
				newspan.className="label";
				//newspan.innerText="I am you new tag:";
				newdiv.appendChild(newspan);
		
				var selectList = document.createElement('select');
				selectList.setAttribute('name', 'selectList' + counter);
   				selectList.setAttribute('id', 'selectList' + counter);
   				selectList.style.width = "180px";
				//var titlesTag = GetTitlesTags();
				var titlesTag = ["Title", "Address", "Content"];				
				for (var i=0; i<titlesTag.length; i++) {
					var option = document.createElement('option');
					option.value = titlesTag[i];
					option.text = titlesTag[i];
					selectList.appendChild(option);
				}
				newdiv.appendChild(selectList);

				var newTitleButton= document.createElement('input');
				var buttonNumber = counter;
				newTitleButton.setAttribute('type','button');
				newTitleButton.setAttribute('name','titleButton' + counter);
				newTitleButton.setAttribute('id','titleButton' + counter);
				newTitleButton.setAttribute('value','New Title');
				newTitleButton.setAttribute('onClick', "AddTitleToSelectList('"+buttonNumber+"')");
				newdiv.appendChild(newTitleButton);

				var newdiv2 = document.createElement('div');
				newdiv2.className="row";
		
				var newspan2 = document.createElement('span');
				newspan2.className='formw';
				
				var newtextarea = document.createElement('textarea');
				newtextarea.setAttribute("name",'textarea' + counter);
				newtextarea.setAttribute("id",'textarea' + counter);
				newtextarea.setAttribute("cols","30");
				newtextarea.setAttribute("rows","4");
				newtextarea.value = 'textarea' + counter;
				newspan2.appendChild(newtextarea);
				
				newdiv2.appendChild(newspan2);
				
				document.getElementById("tagslist").appendChild(newdiv);
				document.getElementById("tagslist").appendChild(newdiv2);
				counter++;
			}
		});

	});
	
	<!--

	-->
	
	<!--
	-->
	
   </script>
	<div style="width: 73%; height: 100%; left:0px; top: 0px; position:absolute;" class="frame">
	  <div id="oDiv" style="width: 100%; padding: 2px; "><span style="font-family: Helvetica, sans-serif;">Webaddress: </span><input id="urlinput" type="text" style="width: 50%" value="http://www.unifr.ch"/></div>
	  <iframe style="width: 100%; height:94%" id="oFrame" class="objectFrame" name="objectFrame" src="http://www.unifr.ch"></iframe>
	</div>
	<div style=" width: 27%;height: 100%; right:0px; top:0px; position: absolute;" class="attributes">
		<div style="padding-left: 2px; top: 30px; position: absolute; color: blue;">
			<div style="border: 1px; padding: 5px; margin: 0px auto;">
					<div>
						<button id="addtagbutton" name="add_tag">
							add tag
						</button>
						<button id="savebutton" name="save">
							save
						</button>
					</div>
				<div id="tagslist">
				</div>
			</div>
		</div>
 	<span style="font-size: 8pt; bottom: 0px; right: 2px; position: absolute;">$Id$</span>
	</div>

 </body>
 </html>
